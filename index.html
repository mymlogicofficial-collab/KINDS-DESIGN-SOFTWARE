<!DOCTYPE html>
<html>
<head>
    <title>K.I.D.S. Shack - Welcome</title>
    <style>
        body { font-family: 'Comic Sans MS', sans-serif; background: #f0f0f0; display: flex; flex-direction: column; align-items: center; }
        #abb-area { position: fixed; bottom: 20px; right: 20px; width: 300px; background: white; border: 3px solid #333; border-radius: 15px; padding: 15px; box-shadow: 10px 10px 0px #aaa; }
        #morph-desk { margin-top: 50px; width: 80%; height: 400px; border: 5px dashed #ccc; display: flex; align-items: center; justify-content: center; background: #fff; }
        input { width: 80%; padding: 10px; margin-top: 10px; border-radius: 5px; border: 1px solid #999; }
    </style>
</head>
<body>

    <div id="morph-desk">
        <h2 id="desk-status">The desk is being cleared...</h2>
    </div>

    <div id="abb-area">
        <div id="abb-chat"><b>Abb:</b> Loading my memory...</div>
        <input type="text" id="user-input" placeholder="Talk to Abb here..." onkeypress="handleChat(event)">
    </div>

    <script>
        // The "Bag of Hooks" - Lila-based Adaptive Logic
        const hooks = [
            "Oof, my gears are creaking. I think I'm 100 years old today. Do I look it?",
            "Wait! Don't tell me... you're a creative kid! I'm Abb, but I'm feeling 100 years old today. Do I look that dusty?",
            "Pardon me, I was just reorganizing my thoughts. I've been at this for a century, I think. Do I look 100 to you?"
        ];

        let currentStep = "intro";
        let abbChat = document.getElementById('abb-chat');

        // Initializing Abb
        window.onload = () => {
            abbChat.innerHTML = "<b>Abb:</b> " + hooks[Math.floor(Math.random() * hooks.length)];
        };

        function handleChat(e) {
            if (e.key === 'Enter') {
                let input = document.getElementById('user-input');
                let val = input.value.toLowerCase();
                
                // The "Fixed Point" Pivot Logic
                if (currentStep === "intro") {
                    abbChat.innerHTML = "<b>Abb:</b> Ha! I'm bad at guessing. Since I'm so old and fuzzy, what's your name and how old are you? I want to get the desk ready for you.";
                    currentStep = "inquiry";
                } else if (currentStep === "inquiry") {
                    // This is where the Morph happens once inquiry is met
                    document.getElementById('desk-status').innerHTML = "Welcome! The Coloring Desk is now OPEN.";
                    abbChat.innerHTML = "<b>Abb:</b> Nice to meet you! I've set up the coloring desk. Just one more thing before you run free...";
                    input.style.display = "none"; // Hide input to focus on art
                }
                input.value = "";
            }
        }
    </script>
</body>
</html>
