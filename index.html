<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KInDS - For ALL KInDS</title>
    <style>
        body { background: #000; color: #39ff14; margin: 0; font-family: sans-serif; overflow: hidden; }
        
        /* Main Container */
        #kinds-hub { display: flex; flex-direction: column; height: 100vh; max-width: 450px; margin: auto; border: 2px solid #333; }

        /* Stage Area (The Switcher) */
        #stage { flex-grow: 1; position: relative; overflow: hidden; background: #111; }

        /* Layers */
        .layer { position: absolute; width: 100%; height: 100%; transition: transform 0.5s ease; display: none; }
        .active-layer { display: block; }

        /* Media Desk / Road Flare Styles [cite: 2026-02-07] */
        #video-screen { width: 90%; height: 200px; background: #000; margin: 20px auto; border: 2px solid #fff; position: relative; }
        .green-flash { animation: flash-green 1s infinite alternate; box-shadow: 0 0 20px #2ecc71; }
        @keyframes flash-green { from { background: #27ae60; } to { background: #2ecc71; } }

        /* Canvas Styles */
        #Main_Canvas { background: transparent; border: 1px solid #39ff14; display: block; margin: auto; touch-action: none; }

        /* Drawer/Navigation */
        #Bottom_Nav { height: 70px; display: flex; justify-content: space-around; align-items: center; background: #222; border-top: 2px solid #333; }
        .nav-btn { font-size: 24px; cursor: pointer; filter: grayscale(1); transition: 0.3s; }
        .nav-btn.active { filter: grayscale(0); transform: scale(1.2); }
    </style>
</head>
<body>

<div id="kinds-hub">
    <div style="padding: 10px; display: flex; justify-content: space-between; font-size: 12px; background: #111;">
        <span>KInDSâ„¢ CREATION-STATION</span>
        <span id="abb-rail">Abb: Watching...</span>
    </div>

    <div id="stage">
        <div id="layer-media" class="layer active-layer" style="padding: 10px;">
            <div id="video-screen">
                <div id="abb-hand" style="display:none; position:absolute; font-size: 50px; z-index: 100;">ğŸ‘‰</div>
                <p id="abb-voice" style="text-align:center; margin-top: 80px;">Abb: "Ready to edit?"</p>
            </div>
            <div style="display: flex; justify-content: space-around; align-items: center;">
                <input type="range" id="speed-knob" style="accent-color: #ff69b4;">
                <button id="next-move" style="background: #27ae60; color: white; border: none; padding: 15px 30px; border-radius: 10px; font-weight: bold;">NEXT</button>
            </div>
        </div>

        <div id="layer-design" class="layer" style="background: #222; padding: 20px;">
            <h3 style="text-align:center;">Prime Time Design</h3>
            <div style="background: #444; height: 150px; border-radius: 15px; display: flex; justify-content: center; align-items: center; font-size: 80px; position: relative;">
                <span id="car-body">ğŸš—</span>
                <span id="spoiler" style="display:none; position:absolute; top: 30px; right: 50px;">ğŸ“</span>
            </div>
            <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
                <button onclick="snap('spoiler')" style="background:orange; padding: 10px; border:none; border-radius:5px;">+ Spoiler</button>
                <button onclick="snap('paint')" style="background:blue; padding: 10px; border:none; border-radius:5px; color:white;">+ Paint</button>
            </div>
        </div>

        <div id="layer-art" class="layer">
            <div style="display: flex; justify-content: space-between; padding: 5px;">
                <button onclick="peelSticker()">[L] VAULT</button>
                <button onclick="autoSort()">[M] LOGIC</button>
            </div>
            <canvas id="Main_Canvas"></canvas>
            <div style="padding: 10px; display: flex; align-items: center; gap: 10px;">
                <input type="color" id="c1" value="#39ff14">
                <input type="range" id="density" style="flex-grow: 1;">
                <button onclick="ctx.clearRect(0,0,cvs.width,cvs.height)">CLEAR</button>
            </div>
        </div>
    </div>

    <div id="Bottom_Nav">
        <div class="nav-btn active" onclick="showLayer('media', this)">ğŸ“¼</div>
        <div class="nav-btn" onclick="showLayer('design', this)">ğŸï¸</div>
        <div class="nav-btn" onclick="showLayer('art', this)">ğŸ¨</div>
    </div>
</div>
        <div style="display: flex; justify-content: space-around; align-items: center; background: #222; border-top: 2px solid #333; height: 60px; position: fixed; bottom: 0; width: 100%; max-width: 450px;">
        <div onclick="location.reload()" style="font-size: 24px; cursor: pointer;">ğŸ“¼</div>
        <div onclick="alert('Morphing to Prime Time Design...')" style="font-size: 24px; cursor: pointer;">ğŸï¸</div>
        <div onclick="alert('Opening Art Studio...')" style="font-size: 24px; cursor: pointer;">ğŸ¨</div>
        <div onclick="alert('AbbCademics: Loading...')" style="font-size: 24px; opacity: 0.5;">ğŸ“š</div>
        </div>
    

<script>
    // INITIALIZE SYSTEM INTEGRITY
window.onload = () => {
    console.log("Abb: 'System check starting...'");
    // This calls your RunIntegrityCheck logic
    RunIntegrityCheck(); 
    
    // Set the initial "Easy" state
    morphToTask('art'); 
};
    
    // --- GLOBAL SETUP ---
    const cvs = document.getElementById('Main_Canvas');
    const ctx = cvs.getContext('2d');
    cvs.width = window.innerWidth * 0.9;
    cvs.height = window.innerHeight * 0.4;
    let drawing = false;

    // --- NAVIGATION LOGIC ---
    function showLayer(layerId, btn) {
        document.querySelectorAll('.layer').forEach(l => l.classList.remove('active-layer'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('layer-' + layerId).classList.add('active-layer');
        btn.classList.add('active');
        resetAbbTimer();
    }

    // --- ABBASIST ROAD FLARE [cite: 2026-02-07] ---
    let timer;
    const nextBtn = document.getElementById('next-move');
    const hand = document.getElementById('abb-hand');

    function resetAbbTimer() {
        clearTimeout(timer);
        nextBtn.classList.remove('green-flash');
        hand.style.display = 'none';
        timer = setTimeout(() => {
            nextBtn.classList.add('green-flash');
            hand.style.display = 'block';
            hand.style.top = (nextBtn.offsetTop - 50) + "px";
        }, 10000);
    }

    // --- ENGINE LOGIC (Sticker/Morph) ---
    function snap(type) {
        if(type === 'spoiler') {
            const s = document.getElementById('spoiler');
            s.style.display = s.style.display === 'none' ? 'block' : 'none';
        } else {
            const c = document.getElementById('car-body');
            c.innerText = c.innerText === 'ğŸš—' ? 'ğŸš™' : 'ğŸš—';
        }
    }

    // --- DRAWING ENGINE ---
    cvs.addEventListener('pointerdown', (e) => { drawing = true; ctx.beginPath(); });
    cvs.addEventListener('pointermove', (e) => {
        if (!drawing) return;
        ctx.lineWidth = 15;
        ctx.lineCap = 'round';
        ctx.strokeStyle = document.getElementById('c1').value;
        ctx.lineTo(e.offsetX, e.offsetY);
        ctx.stroke();
    });
    window.addEventListener('pointerup', () => drawing = false);

    // --- UTILITIES ---
    function peelSticker() { alert("Image Captured to Vault!"); }
    function autoSort() { alert("M-Logic: Image Cataloged!"); }

    document.addEventListener('pointerdown', resetAbbTimer);
    resetAbbTimer();
</script>

</body>
</html>
