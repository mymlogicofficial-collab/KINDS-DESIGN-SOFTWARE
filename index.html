<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>K.I.N.D.S. Workbench - STAMP ENGINE</title>
    <style>
        body { background: #0e0e0e; color: #e0e0e0; margin: 0; font-family: sans-serif; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        #Area_A { width: 100%; height: 50px; background: #1a1a1a; display: flex; justify-content: space-around; align-items: center; border-bottom: 2px solid #39ff14; z-index: 10; }
        .mag-btn { background: #222; color: #39ff14; border: 1px solid #39ff14; padding: 5px 10px; border-radius: 4px; font-size: 11px; font-weight: bold; }
        #Workspace { flex-grow: 1; display: flex; justify-content: center; align-items: center; background: #222; position: relative; }
        #Main_Canvas { width: 85vw; height: 45vh; background: #fff; box-shadow: 0 0 30px #000; transition: transform 0.1s linear; position: relative; overflow: hidden; }
        
        /* [I] STAMP LAYER */
        #Stamp_Layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        
        #Workbench { width: 100%; background: #151515; border-top: 1px solid #333; max-height: 50vh; overflow-y: auto; padding-bottom: 30px; }
        .drawer { display: flex; align-items: center; padding: 12px; border-bottom: 1px solid #222; font-size: 13px; }
        .label { min-width: 90px; color: #888; font-weight: bold; font-size: 10px; text-transform: uppercase; }
        .mixer-well { display: flex; align-items: center; gap: 8px; background: #222; padding: 5px 10px; border-radius: 20px; border: 1px solid #444; }
        #Blend_Preview { width: 45px; height: 30px; border-radius: 4px; border: 2px solid #39ff14; margin-left: 10px; }
        .item { background: #333; margin: 0 5px; padding: 8px 12px; border-radius: 4px; cursor: pointer; white-space: nowrap; border: 1px solid #444; }
    </style>
</head>
<body>

    <div id="Area_A">
        <button class="mag-btn" onclick="snap0()">üß≤ SNAP 0¬∞</button>
        <button id="lockBtn" class="mag-btn" onclick="toggleLock()">üîí MAG LOCK: OFF</button>
        <input type="range" min="0" max="360" value="0" oninput="rotateCanvas(this.value)">
    </div>

    <div id="Workspace">
        <div id="Main_Canvas">
            <canvas id="Stamp_Layer"></canvas>
        </div>
    </div>

    <div id="Workbench">
        <div class="drawer">
            <span class="label">[H] DUAL MIX:</span>
            <div class="mixer-well">
                <input type="color" id="color1" oninput="mixColors()" value="#ff00e1">
                <input type="color" id="color2" oninput="mixColors()" value="#00f2ff">
            </div>
            <div id="Blend_Preview"></div>
            <input type="range" id="blendRatio" min="0" max="100" value="50" oninput="mixColors()" style="margin-left:10px;">
        </div>

        <div class="drawer">
            <span class="label">[I] STAMPS:</span>
            <div class="item" onclick="applyStamp('honeycomb')">üêù Honeycomb</div>
            <div class="item" onclick="applyStamp('cosmos')">üåå Cosmos</div>
            <div class="item" onclick="applyStamp('none')">üö´ Clear</div>
        </div>

        <div class="drawer">
            <span class="label">[J-K] TOKENS:</span>
            <span style="font-size: 20px; margin-left: 10px;">ü•É üß∏ üèÅ ü™¥</span>
        </div>
    </div>

    <script>
        let rotation = 0;
        let isLocked = false;
        let activeColor = "#39ff14";

        const canvas = document.getElementById('Main_Canvas');
        const stampCanvas = document.getElementById('Stamp_Layer');
        const ctx = stampCanvas.getContext('2d');

        // Setup Stamp Canvas Size
        stampCanvas.width = window.innerWidth;
        stampCanvas.height = window.innerHeight;

        function rotateCanvas(val) { if (!isLocked) { rotation = val; canvas.style.transform = `rotate(${rotation}deg)`; } }
        function snap0() { rotation = 0; canvas.style.transform = 'rotate(0deg)'; isLocked = true; document.getElementById('lockBtn').innerText = "üîí MAG LOCK: ON"; }
        function toggleLock() { isLocked = !isLocked; document.getElementById('lockBtn').innerText = isLocked ? "üîí MAG LOCK: ON" : "üîí MAG LOCK: OFF"; }

        function mixColors() {
            const c1 = document.getElementById('color1').value;
            const c2 = document.getElementById('color2').value;
            const ratio = document.getElementById('blendRatio').value / 100;
            const r1 = parseInt(c1.substring(1,3), 16), g1 = parseInt(c1.substring(3,5), 16), b1 = parseInt(c1.substring(5,7), 16);
            const r2 = parseInt(c2.substring(1,3), 16), g2 = parseInt(c2.substring(3,5), 16), b2 = parseInt(c2.substring(5,7), 16);
            const rM = Math.floor(r1*(1-ratio)+r2*ratio), gM = Math.floor(g1*(1-ratio)+g2*ratio), bM = Math.floor(b1*(1-ratio)+b2*ratio);
            activeColor = "#" + ((1 << 24) + (rM << 16) + (gM << 8) + bM).toString(16).slice(1);
            document.getElementById('Blend_Preview').style.background = activeColor;
        }

        // [I] STAMP ENGINE
        function applyStamp(type) {
            ctx.clearRect(0, 0, stampCanvas.width, stampCanvas.height);
            if (type === 'none') return;
            
            ctx.fillStyle = activeColor;
            ctx.globalAlpha = 0.3;

            if (type === 'honeycomb') {
                for (let i = 0; i < 500; i+=20) {
                    for (let j = 0; j < 500; j+=20) {
                        ctx.beginPath();
                        ctx.arc(i, j, 8, 0, 2 * Math.PI);
                        ctx.fill();
                    }
                }
            } else if (type === 'cosmos') {
                for (let i = 0; i < 100; i++) {
                    ctx.fillRect(Math.random()*stampCanvas.width, Math.random()*stampCanvas.height, 2, 2);
                }
            }
        }
        mixColors();
    </script>
</body>
</html>
